<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DiceTales Test</title>
</head>
<body>
    <h1>DiceTales System Test</h1>
    <div id="test-output"></div>
    
    <script src="js/utils.js"></script>
    <script src="js/gameState.js"></script>
    <script src="js/character.js"></script>
    <script src="js/dice.js"></script>
    <script src="js/ai.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/main.js"></script>
    
    <script>
        // Test script to verify all systems load correctly
        document.addEventListener('DOMContentLoaded', () => {
            const output = document.getElementById('test-output');
            const tests = [];
            
            // Test utility functions
            tests.push({
                name: 'Utils loaded',
                result: typeof logger !== 'undefined' && typeof eventBus !== 'undefined'
            });
            
            // Test global instances
            tests.push({
                name: 'GameState instance',
                result: typeof gameState !== 'undefined' && gameState instanceof GameState
            });
            
            tests.push({
                name: 'CharacterManager instance', 
                result: typeof characterManager !== 'undefined' && characterManager instanceof CharacterManager
            });
            
            tests.push({
                name: 'DiceSystem instance',
                result: typeof diceSystem !== 'undefined' && diceSystem instanceof DiceSystem
            });
            
            tests.push({
                name: 'AIManager instance',
                result: typeof aiManager !== 'undefined' && aiManager instanceof AIManager
            });
            
            tests.push({
                name: 'AudioManager instance',
                result: typeof audioManager !== 'undefined' && audioManager instanceof AudioManager
            });
            
            tests.push({
                name: 'UIManager instance',
                result: typeof uiManager !== 'undefined' && uiManager instanceof UIManager
            });
            
            tests.push({
                name: 'Main app instance',
                result: typeof app !== 'undefined' && app instanceof DiceTalesApp
            });
            
            // Test utility functions
            tests.push({
                name: 'createElement function',
                result: typeof createElement === 'function'
            });
            
            tests.push({
                name: 'showToast function',
                result: typeof showToast === 'function'
            });
            
            tests.push({
                name: 'getAbilityModifier function',
                result: typeof getAbilityModifier === 'function' && getAbilityModifier(15) === 2
            });
            
            // Display results
            let html = '<h2>System Tests:</h2><ul>';
            tests.forEach(test => {
                const status = test.result ? '‚úÖ' : '‚ùå';
                html += `<li>${status} ${test.name}</li>`;
            });
            html += '</ul>';
            
            const passedTests = tests.filter(t => t.result).length;
            html += `<p><strong>Results: ${passedTests}/${tests.length} tests passed</strong></p>`;
            
            if (passedTests === tests.length) {
                html += '<p style="color: green;">üéâ All systems loaded successfully!</p>';
                
                // Test character creation
                setTimeout(() => {
                    logger.info('Testing character creation...');
                    if (app && app.showCharacterCreation) {
                        // Don't actually show it in test, just verify the method exists
                        html += '<p style="color: blue;">üìù Character creation system ready</p>';
                        output.innerHTML = html;
                    }
                }, 1000);
            } else {
                html += '<p style="color: red;">‚ùå Some systems failed to load</p>';
            }
            
            output.innerHTML = html;
        });
    </script>
</body>
</html>
