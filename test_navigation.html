<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DiceTales Navigation Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-result { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .pass { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .fail { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .warning { background-color: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
    </style>
</head>
<body>
    <h1>DiceTales Navigation Test</h1>
    <div id="test-results"></div>

    <script>
        function runTests() {
            const results = [];
            
            // Test 1: Check if main HTML exists
            results.push({
                name: "Main HTML file exists",
                status: "pass",
                message: "index.html is accessible"
            });

            // Test 2: Check navigation buttons
            const navButtons = [
                'settings-btn',
                'character-sheet-btn',
                'campaign-log-btn',
                'save-game-btn',
                'import-export-btn',
                'dm-evaluation-btn'
            ];

            fetch('index.html')
                .then(response => response.text())
                .then(html => {
                    navButtons.forEach(btnId => {
                        if (html.includes(`id="${btnId}"`)) {
                            results.push({
                                name: `Navigation button: ${btnId}`,
                                status: "pass",
                                message: "Button exists in HTML"
                            });
                        } else {
                            results.push({
                                name: `Navigation button: ${btnId}`,
                                status: "fail",
                                message: "Button missing from HTML"
                            });
                        }
                    });

                    // Test 3: Check modals
                    const modals = [
                        'settings-modal',
                        'character-sheet-modal',
                        'campaign-log-modal',
                        'inventory-modal',
                        'import-export-modal',
                        'dm-evaluation-modal'
                    ];

                    modals.forEach(modalId => {
                        if (html.includes(`id="${modalId}"`)) {
                            results.push({
                                name: `Modal: ${modalId}`,
                                status: "pass",
                                message: "Modal exists in HTML"
                            });
                        } else {
                            results.push({
                                name: `Modal: ${modalId}`,
                                status: "fail",
                                message: "Modal missing from HTML"
                            });
                        }
                    });

                    // Test 4: Check JavaScript files
                    const jsFiles = [
                        'js/config.js',
                        'js/utils.js',
                        'js/gameState.js',
                        'js/memoryManager.js',
                        'js/character.js',
                        'js/characterDataManager.js',
                        'js/characterIntegration.js',
                        'js/dice.js',
                        'js/dmEvaluator.js',
                        'js/ai.js',
                        'js/audio.js',
                        'js/ui.js',
                        'js/evaluationUI.js',
                        'js/systemIntegration.js',
                        'js/main.js'
                    ];

                    jsFiles.forEach(jsFile => {
                        if (html.includes(jsFile)) {
                            results.push({
                                name: `JavaScript file: ${jsFile}`,
                                status: "pass",
                                message: "File included in HTML"
                            });
                        } else {
                            results.push({
                                name: `JavaScript file: ${jsFile}`,
                                status: "fail",
                                message: "File not included in HTML"
                            });
                        }
                    });

                    displayResults(results);
                })
                .catch(error => {
                    results.push({
                        name: "HTML file access",
                        status: "fail",
                        message: `Could not access index.html: ${error.message}`
                    });
                    displayResults(results);
                });
        }

        function displayResults(results) {
            const container = document.getElementById('test-results');
            container.innerHTML = '';

            results.forEach(result => {
                const div = document.createElement('div');
                div.className = `test-result ${result.status}`;
                div.innerHTML = `
                    <strong>${result.name}</strong>: ${result.message}
                `;
                container.appendChild(div);
            });

            // Summary
            const passed = results.filter(r => r.status === 'pass').length;
            const failed = results.filter(r => r.status === 'fail').length;
            const warnings = results.filter(r => r.status === 'warning').length;

            const summary = document.createElement('div');
            summary.className = 'test-result';
            summary.style.marginTop = '20px';
            summary.style.fontWeight = 'bold';
            summary.innerHTML = `
                <h3>Test Summary</h3>
                <p>Passed: ${passed} | Failed: ${failed} | Warnings: ${warnings}</p>
            `;
            container.appendChild(summary);
        }

        // Run tests when page loads
        runTests();
    </script>
</body>
</html>
